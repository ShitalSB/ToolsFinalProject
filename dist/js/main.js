"use strict";!function(){var t={},o=[];function n(e){if(t[e])return t[e];var n=new Image;n.onload=function(){t[e]=n,s()&&o.forEach(function(e){e()})},t[e]=!1,n.src=e}function s(){var e=!0;for(var n in t)t.hasOwnProperty(n)&&!t[n]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){n(e)}):n(e)},get:function(e){return t[e]},onReady:function(e){o.push(e)},isReady:s}}();var count=1,lifesCounter=3,frameCount=0,doubleCount=0,Enemy=function(e,n,t){this.x=e,this.y=n,this.speed=t,this.lives=!1};Enemy.prototype.life=function(){this.lives&&(this.lives=!1,1==lifesCounter?winnerAndGameover("lozer"):document.getElementById("life").textContent="Life ="+--lifesCounter)},Enemy.prototype.update=function(e){var n=this;this.x+=50*this.speed*e,500<=this.x&&(this.x=-100),player.x<this.x+90&&this.x<player.x+80&&this.y+24>player.y&&player.y+90>this.y&&(this.lives=!0,setTimeout(function(){player.x=200,player.y=410,n.life()},150),setTimeout(function(){document.querySelector("body").style.backgroundImage="none"},410),document.querySelector("body").style.backgroundImage="url('images/boom.png')")},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(["images/frames 0.png","images/frames 1.png","images/frames 2.png","images/frames 3.png","images/frames 4.png","images/frames 5.png","images/frames 6.png","images/frames 7.png","images/frames 8.png","images/frames 9.png","images/frames 10.png"][frameCount%11]),this.x,this.y),doubleCount%10==0&&frameCount++,doubleCount++};var Player=function(e,n){this.x=e,this.y=n,this.sprite="images/char-boy.png"};Player.prototype.update=function(){},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var player=new Player(200,410);function resetGame(){count=1,lifesCounter=3,document.getElementById("score").textContent="Best Level = 10,Current Level = "+count,document.getElementById("life").textContent="Life = "+lifesCounter;for(var e=0;3<allEnemies.length;e++)allEnemies.pop();player.x=200,player.y=410,enemies1.speed=1,enemies2.speed=1.8,enemies3.speed=1.4,document.querySelector(".congo1")&&document.querySelector(".congo1").remove()}Player.prototype.handleInput=function(e){"right"==e&&this.x<410?this.x+=101:"left"==e?this.x-=101:"up"==e?this.y-=85:"down"==e&&(this.y+=85),this.y<40&&(this.y=410,this.x=200,document.getElementById("score").textContent="Best Level = 10,Current Level = "+ ++count,10<count&&winnerAndGameover("winner"),count<=10&&increaseLevel()),400<this.x&&(this.x=400),this.x<0&&(this.x=0),410<this.y&&(this.y=410)};var enemies1=new Enemy(-200,130,1),enemies2=new Enemy(-300,210,1.8),enemies3=new Enemy(-100,290,1.4),allEnemies=[enemies1,enemies2,enemies3];function increaseLevel(){var e=[130,210,290],n=[-100,-200,-300,-410,-500],t=new Enemy(n[Math.floor(Math.random()*n.length)],e[Math.floor(Math.random()*e.length)],randomNumber(1,5));allEnemies.push(t);var o=!0,s=!1,a=void 0;try{for(var r,i=allEnemies[Symbol.iterator]();!(o=(r=i.next()).done);o=!0){r.value.speed+=.2}}catch(e){s=!0,a=e}finally{try{!o&&i.return&&i.return()}finally{if(s)throw a}}}function randomNumber(e,n){return Math.floor(Math.random()*(n-e+1))+e}function winnerAndGameover(e){var n=document.createElement("div");n.setAttribute("class","congo1");var t=document.createElement("div");t.setAttribute("class","congo");var o=document.createElement("button");o.textContent="Play Again",o.setAttribute("class","playagain"),o.addEventListener("click",resetGame),"winner"==e?(t.innerHTML="<h1>Congratulations You won!!!!!! <p>üòçüòçüòçüòç</p></h1><p>Your highest level is : "+(count-1),t.classList.add("rotate")):(t.innerHTML="<h1>oops you lost you lifes <p>üòñüòñüòñüòñ</p></h1><p>Your highest level is : "+(count-1)+"</p>",t.classList.add("bounceInDown")),t.appendChild(o),n.appendChild(t),document.body.appendChild(n)}document.addEventListener("keyup",function(e){if(!document.querySelector(".congo")){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])}});var Engine=function(e){var o,n=e.document,s=e.window,a=n.createElement("canvas"),r=a.getContext("2d");function i(){var e,n,t=Date.now();window.dt=(t-o)/1e3,e=dt,n=e,allEnemies.forEach(function(e){e.update(n)}),player.update(),function(){var e,n,t=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"];for(r.clearRect(0,0,a.width,a.height),e=0;e<6;e++)for(n=0;n<9;n++)r.drawImage(Resources.get(t[e]),101*n,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),o=t,s.requestAnimationFrame(i)}a.width=505,a.height=606,n.body.appendChild(a),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/char-boy.png","images/frames 0.png","images/frames 1.png","images/frames 2.png","images/frames 3.png","images/frames 4.png","images/frames 5.png","images/frames 6.png","images/frames 7.png","images/frames 8.png","images/frames 9.png","images/frames 10.png"]),Resources.onReady(function(){o=Date.now(),i()}),e.ctx=r}(void 0);